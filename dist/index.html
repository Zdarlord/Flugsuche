<!DOCTYPE html><html lang="en"> <head> <meta charset="UTF-8"> <title>Flugsuche</title> <link rel="stylesheet" href="style.c865681a.css">  <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.0.3/build/ol.js" type="text/javascript"></script> <script src="https://api.mapbox.com/mapbox.js/plugins/arc.js/v0.1.0/arc.js"></script> <link rel="stylesheet" href="https://openlayers.org/en/v5.0.3/css/ol.css" type="text/css"> <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script> <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script> <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"> <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script> <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script> <link rel="stylesheet" href="FS2.3e5e72c1.css"></head> <body> <div id="waitOverlayWrapper" style="display:none"> <div id="waitOverlayContent"> <img src="black-plane.2c962707.png" id="waitPlane"> <p class="text-center" style="margin-top:2.8em"> Bitte warten... </p> </div> </div> <div class="headerBar"> <form action="http://flights.eliashenrich.de/form.php" method="POST" class="text-center" onsubmit="return showOverlay()"> von <input type="text" name="origin" value="SYD" placeholder="von" class="text-center" id="from"> nach <input type="text" name="destination" value="LAX" placeholder="nach" class="text-center" id="to"> <input type="submit" value="Suchen"> </form> </div> <div class="contentWrapper"> <div class="contentLeft"> <h1> Ihre Flüge: </h1> <ul class="flightList" id="flightList"> <li class="hidden" id="listDummyRoute"> <span class="flightFrom"></span> -> <span class="flightTo"></span> <span class="timeDeparture">13:00</span> <span class="timeArrival">17:00</span> Lat: <span class="latFrom"></span> Lon: <span class="lonFrom"></span> Lat: <span class="latTo"></span> Lon: <span class="lonTo"></span> </li> </ul> </div> <div class="contentRight"> <h1> Unsere Flugrouten: </h1> <div id="map-container" class="map-container"><div id="info"></div></div> <ul class="airportList" id="airportList"> <li class="hidden" id="listDummyAirport"> ID: <span class="airportId"></span> / Kürzel: <span class="airportCode"></span> / Name: <span class="airportName"></span> / Position (<span class="airportLat"></span>, <span class="airportLon"></span>) </li> </ul> </div> </div> <script>var flightSearch=new FlightSearchAPI,params={from:document.getElementById("from").value,to:document.getElementById("to").value};function FlightSearchAPI(){this.endpoint="http://flights.eliashenrich.de/api.php",this.requestAPI=function(e,t,o){for(var r=this.endpoint+"?action="+e,n=Object.keys(t),a=0;a<n.length;a++){r+="&"+n[a]+"="+t[n[a]]}var i=new XMLHttpRequest;i.onreadystatechange=function(){console.log("Status hat sich geändert",this.readyState),4===this.readyState&&200===this.status&&(console.log("Anfrage erfolgreich: "+e),console.log(this.responseText),o(this.responseText,e))},i.open("GET",r,!0),i.send()}}function successCallback(e,t){var o=JSON.parse(e);if("/route/find"==t)for(var r=0;r<o.length;r++){var n=o[r];console.log("Flug "+r);for(var a=0;a<n.length;a++){var i=n[a];console.log("Leg "+a,i);var s=i.airportFrom.CityName,l=i.airportTo.CityName,m=i.airportFrom.PositionLat,d=i.airportFrom.PositionLon,p=i.airportTo.PositionLat,u=i.airportTo.PositionLon;if(i.schedule[a])var c=i.schedule[a].ScheduledDepartureTime,g=i.schedule[a].ScheduledArrivalTime;addListItemRoute(s,m,d,l,p,u,c,g)}}if("/airports/all"==t&&o)for(r=0;r<o.data.length;r++){var h=o.data[r];addListItemAirport(h.Id,h.CodeIATA,h.CityName,h.PositionLat,h.PositionLon)}}function showOverlay(){var e={from:document.getElementById("from").value,to:document.getElementById("to").value},t=(mapAirportCodeToName(e.from),mapAirportCodeToId(e.from)),o=(mapAirportCodeToName(e.to),mapAirportCodeToId(e.to));mapAirportCodeToLon(e.from),mapAirportCodeToLat(e.from),mapAirportCodeToLon(e.to),mapAirportCodeToLat(e.to);return e.from=t,e.to=o,flightSearch.requestAPI("/route/find",e,successCallback),!1}function hideOverlay(){document.getElementById("waitOverlayWrapper").style.display="none"}function addListItemRoute(e,t,o,r,n,a,i,s){var l=document.getElementById("listDummyRoute").cloneNode(!0);l.setAttribute("id",""),l.classList.remove("hidden"),l.getElementsByClassName("flightFrom")[0].innerText=e,l.getElementsByClassName("latFrom")[0].innerText=t,l.getElementsByClassName("lonFrom")[0].innerText=o,l.getElementsByClassName("flightTo")[0].innerText=r,l.getElementsByClassName("latTo")[0].innerText=n,l.getElementsByClassName("lonTo")[0].innerText=a,l.getElementsByClassName("timeDeparture")[0].innerText=i.substr(0,5),l.getElementsByClassName("timeArrival")[0].innerText=s.substr(0,5),document.getElementById("flightList").appendChild(l)}function addListItemAirport(e,t,o,r,n){var a=document.getElementById("listDummyAirport").cloneNode(!0);a.setAttribute("id",""),a.classList.remove("hidden"),a.getElementsByClassName("airportId")[0].innerText=e,a.getElementsByClassName("airportCode")[0].innerText=t,a.getElementsByClassName("airportName")[0].innerText=o,a.getElementsByClassName("airportLat")[0].innerText=r,a.getElementsByClassName("airportLon")[0].innerText=n,document.getElementById("airportList").appendChild(a)}function mapAirportCodeToName(e){e+="";for(var t="",o=document.getElementsByClassName("airportCode"),r=document.getElementsByClassName("airportName"),n=1;n<o.length;n++)o[n].innerText==e&&(t=r[n].innerText);return t}function mapAirportCodeToId(e){e+="";for(var t=null,o=document.getElementsByClassName("airportCode"),r=document.getElementsByClassName("airportId"),n=1;n<o.length;n++)o[n].innerText==e&&(t=r[n].innerText);return t}function mapAirportCodeToLon(e){e+="";for(var t=null,o=document.getElementsByClassName("airportCode"),r=document.getElementsByClassName("airportLon"),n=1;n<o.length;n++)o[n].innerText==e&&(t=r[n].innerText);return t}function mapAirportCodeToLat(e){e+="";for(var t=null,o=document.getElementsByClassName("airportCode"),r=document.getElementsByClassName("airportLat"),n=1;n<o.length;n++)o[n].innerText==e&&(t=r[n].innerText);return t}flightSearch.requestAPI("/airports/all",params,successCallback);</script> <script src="FS2.770a1ba5.js"></script> </body> </html>